@startuml agente_secreto
actor "Guest" as Guest
actor "OTA (Booking.com)" as OTA
actor "Channel Manager" as CM
actor "PMS" as PMS
actor "Hotel Assistant (Begasist)" as HA
actor "Recepcionista" as Receptionist

'--- RESERVA + MENSAJE ---
Guest --> OTA : Reserva + mensaje “¿Tienen cuna?”
OTA --> CM : Reserva + mensaje (API)
CM --> PMS : Reserva + mensaje (API)
CM --> HA : Notifica reserva, guestId, mensaje (API/Webhook)
PMS --> Receptionist : Muestra reserva + mensaje guest

'--- AGENTE INTELIGENTE/SECRETO ---
Receptionist --> HA : Consulta: “¿Quién es Fulanito?”
HA --> Receptionist : Responde con insights (reincidente, VIP, historial, etc.)
HA --> Receptionist : Sugiere respuesta (“Sí, tenemos cuna”)
Receptionist --> PMS : Responde guest por canal permitido

'--- OPCIÓN AUTOMATIZADA ---
HA --> CM : (opcional) Propone o envía respuesta por canal OTA
CM --> OTA : OTA muestra respuesta a Guest

@enduml
